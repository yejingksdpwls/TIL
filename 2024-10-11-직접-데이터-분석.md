### **과제  내용**

- Python 라이브러리를 활용하여 주어진 데이터(.xlxs)를 분석 Quiz를 수행해주세요.

1. Python 라이브러리 함수를 사용하여 엑셀 파일을 불러오고, DataFrame을 출력해주세요.

2. 각 경찰서(`관서명`)를 해당 구 이름으로 매핑하여 '구별'이라는 새로운 column을 생성하고, DataFrame을 출력해주세요.
    - 매칭되지 않는 경찰서명에 대해서는 기본값 `'구 없음'`을 할당합니다.
    
3. pivot_table 을 사용하여 관서별 데이터를 구별 데이터로 변경하고, 같은 구의 경우에는 sum을 적용하여 더해주세요. (index : 관서 이름 -> 구 이름)

4. 구 없음  행은 drop 을 활용하여 삭제해주세요.

5. 각 범죄 별로 검거율을 계산하고, 각 검거율 데이터 column을 DataFrame에 추가해주세요.

6. 필요없는 column을 del 을 사용하여 삭제해주세요.

7. DataFrame의 컬럼명을 rename 을 사용하여 변경해주세요.

&nbsp;

### [ 코드 및 설명 ]
```
##### 3번 기본 과제 #####

### 3-1 문제 ###
df = pd.read_excel("관서별 5대범죄 발생 및 검거.xlsx")
pop = pd.read_csv("pop_kor.csv", index_col='구별')
df.head()


### 3-2 문제 ###
area = {'서대문서': '서대문구', '수서서': '강남구', '강서서': '강서구', '서초서': '서초구',
'서부서': '은평구', '중부서': '중구', '종로서': '종로구', '남대문서': '중구',
'혜화서': '종로구', '용산서': '용산구', '성북서': '성북구', '동대문서': '동대문구',
'마포서': '마포구', '영등포서': '영등포구', '성동서': '성동구', '동작서': '동작구',
'광진서': '광진구', '강북서': '강북구', '금천서': '금천구', '중랑서': '중랑구',
'강남서': '강남구', '관악서': '관악구', '강동서': '강동구', '종암서': '성북구',
'구로서': '구로구', '양천서': '양천구', '송파서': '송파구', '노원서': '노원구',
'방배서': '서초구', '은평서': '은평구', '도봉서': '도봉구'}

for n in range(0,len(df)): # 모든 행에 대해 반복
  if df.loc[n,'관서명'] in list(area.keys()): 					# '관서명'열의 값이 area 딕셔너리에 존재하는 경우
    df.loc[n,'구별'] = area.get(df.loc[n,'관서명']) 				# 키 값에 따른 값을 출력해 '구별'열에 저장
  else:
    df.loc[n,'구별'] = '구 없음' 								# 리스트에 없는 경우 '구 없음' 값으로 저장
df.head()

### 3-3 문제 ###
pivot_df = pd.pivot_table(df,values=list(df.columns[1:13]) ,index='구별', aggfunc=np.sum)
pivot_df.index.name = '구 이름'

### 3-4 문제 ###
pivot_df.drop(index='구 없음',inplace = True)

### 3-5 문제 ###
crime = ['강간', '강도', '살인', '절도', '폭력']
for i in crime: 												# crime 리스트를 통해 '검거'와 '발생' 각각 비율 계산
  pivot_df[i+'검거율'] = pivot_df[i+'(검거)']/pivot_df[i+'(발생)']*100
pivot_df['검거율']=pivot_df['소계(검거)']/pivot_df['소계(발생)']*100 # 소계는 따로 계산

### 3-6 문제 ###
stat = ['(검거)']
criminal = [a+stat[0] for a in crime] 								# 리스트와 반복을 이용해 제거할 열 이름 생성
criminal = criminal+['소계(검거)', '소계(발생)']

for i in criminal:
  del pivot_df[i]

### 3-7 문제 ###
pivot_df.rename(columns={
'강간(발생)':'강간',
'강도(발생)':'강도',
'살인(발생)':'살인',
'절도(발생)':'절도',
'폭력(발생)':'폭력'}, inplace=True)

pivot_df.head()
```

&nbsp

#### [ 배운 점 ]
- **딕셔너리에서 키 값에 따른 값 출력하는 방법**
: .get(&nbsp ) 함수와 키 값을 통해 값 출력 가능
&nbsp;
* **안정적인 인덱싱 방법**
: *df['열이름'][n]* 보다 *df.loc[n, '열이름']* 으로 인덱싱 하는 것이 더 안정적
&nbsp;

* **피벗테이블 사용법**
: pivot_table 함수 내의 'values', 'index', 'aggfunc' 등에 대한 이해가 필요
( 나중에 외운 후 내용 각 파라미터에 대한 내용 추가할 예정 )
&nbsp;
* **문자열 간의 병합**
: '문자열'+'문자열'로 병합할 수 있음
: concat 함수를 사용하는 줄 알았는데 concat 은 **리스트 간** 사용하는 함수임
